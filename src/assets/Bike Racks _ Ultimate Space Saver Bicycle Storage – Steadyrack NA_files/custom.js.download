window.ON_CHANGE_DEBOUNCE_TIMER=300,window.PUB_SUB_EVENTS={cartUpdate:"cart-update",quantityUpdate:"quantity-update",optionValueSelectionChange:"option-value-selection-change",variantChange:"variant-change",cartError:"cart-error",library:{carousel:"carousel-loaded"},quickView:{open:"quick-view-open"}};let subscribers={};function subscribe(eventName,callback){return subscribers[eventName]===void 0&&(subscribers[eventName]=[]),subscribers[eventName]=[...subscribers[eventName],callback],function(){subscribers[eventName]=subscribers[eventName].filter(cb=>cb!==callback)}}function publish(eventName,data){subscribers[eventName]&&subscribers[eventName].forEach(callback=>{callback(data)})}function getFocusableElements(container){return Array.from(container.querySelectorAll("summary, a[href], button:enabled, [tabindex]:not([tabindex^='-']), [draggable], area, input:not([type=hidden]):enabled, select:enabled, textarea:enabled, object, iframe"))}class SectionId{static#separator="__";static parseId(qualifiedSectionId){return qualifiedSectionId.split(SectionId.#separator)[0]}static parseSectionName(qualifiedSectionId){return qualifiedSectionId.split(SectionId.#separator)[1]}static getIdForSection(sectionId,sectionName){return`${sectionId}${SectionId.#separator}${sectionName}`}}class HTMLUpdateUtility{static viewTransition(oldNode,newContent,preProcessCallbacks=[],postProcessCallbacks=[]){preProcessCallbacks?.forEach(callback=>callback(newContent));const newNodeWrapper=document.createElement("div");HTMLUpdateUtility.setInnerHTML(newNodeWrapper,newContent.outerHTML);const newNode=newNodeWrapper.firstChild,uniqueKey=Date.now();oldNode.querySelectorAll("[id], [form]").forEach(element=>{element.id&&(element.id=`${element.id}-${uniqueKey}`),element.form&&element.setAttribute("form",`${element.form.getAttribute("id")}-${uniqueKey}`)}),oldNode.parentNode.insertBefore(newNode,oldNode),oldNode.style.display="none",postProcessCallbacks?.forEach(callback=>callback(newNode)),setTimeout(()=>oldNode.remove(),500)}static setInnerHTML(element,html){element.innerHTML=html,element.querySelectorAll("script").forEach(oldScriptTag=>{const newScriptTag=document.createElement("script");Array.from(oldScriptTag.attributes).forEach(attribute=>{newScriptTag.setAttribute(attribute.name,attribute.value)}),newScriptTag.appendChild(document.createTextNode(oldScriptTag.innerHTML)),oldScriptTag.parentNode.replaceChild(newScriptTag,oldScriptTag)})}}const trapFocusHandlers={};function trapFocus(container,elementToFocus=container){var elements=getFocusableElements(container),first=elements[0],last=elements[elements.length-1];removeTrapFocus(),trapFocusHandlers.focusin=event=>{event.target!==container&&event.target!==last&&event.target!==first||document.addEventListener("keydown",trapFocusHandlers.keydown)},trapFocusHandlers.focusout=function(){document.removeEventListener("keydown",trapFocusHandlers.keydown)},trapFocusHandlers.keydown=function(event){event.code.toUpperCase()==="TAB"&&(event.target===last&&!event.shiftKey&&(event.preventDefault(),first.focus()),(event.target===container||event.target===first)&&event.shiftKey&&(event.preventDefault(),last.focus()))},document.addEventListener("focusout",trapFocusHandlers.focusout),document.addEventListener("focusin",trapFocusHandlers.focusin),elementToFocus.focus(),elementToFocus.tagName==="INPUT"&&["search","text","email","url"].includes(elementToFocus.type)&&elementToFocus.value&&elementToFocus.setSelectionRange(0,elementToFocus.value.length)}function focusVisiblePolyfill(){const navKeys=["ARROWUP","ARROWDOWN","ARROWLEFT","ARROWRIGHT","TAB","ENTER","SPACE","ESCAPE","HOME","END","PAGEUP","PAGEDOWN"];let currentFocusedElement=null,mouseClick=null;window.addEventListener("keydown",event=>{navKeys.includes(event.code.toUpperCase())&&(mouseClick=!1)}),window.addEventListener("mousedown",event=>{mouseClick=!0}),window.addEventListener("focus",()=>{currentFocusedElement&&currentFocusedElement.classList.remove("focused"),!mouseClick&&(currentFocusedElement=document.activeElement,currentFocusedElement.classList.add("focused"))},!0)}function pauseAllMedia(){document.querySelectorAll(".js-youtube").forEach(video=>{video.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")}),document.querySelectorAll(".js-vimeo").forEach(video=>{video.contentWindow.postMessage('{"method":"pause"}',"*")}),document.querySelectorAll("video").forEach(video=>video.pause()),document.querySelectorAll("product-model").forEach(model=>{model.modelViewerUI&&model.modelViewerUI.pause()})}function removeTrapFocus(elementToFocus=null){document.removeEventListener("focusin",trapFocusHandlers.focusin),document.removeEventListener("focusout",trapFocusHandlers.focusout),document.removeEventListener("keydown",trapFocusHandlers.keydown),elementToFocus&&elementToFocus.focus()}function onKeyUpEscape(event){if(event.code.toUpperCase()!=="ESCAPE")return;const openDetailsElement=event.target.closest("details[open]");if(!openDetailsElement)return;const summaryElement=openDetailsElement.querySelector("summary");openDetailsElement.removeAttribute("open"),summaryElement.setAttribute("aria-expanded",!1),summaryElement.focus()}function debounce(fn,wait){let t;return(...args)=>{clearTimeout(t),t=setTimeout(()=>fn.apply(this,args),wait)}}function throttle(fn,delay){let lastCall=0;return function(...args){const now=new Date().getTime();if(!(now-lastCall<delay))return lastCall=now,fn(...args)}}function fetchConfig(type="json"){return{method:"POST",headers:{"Content-Type":"application/json",Accept:`application/${type}`}}}function initLazyScript(element,callback,threshold=500){"IntersectionObserver"in window?new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{entry.isIntersecting&&typeof callback=="function"&&(callback(),observer.unobserve(entry.target))})},{rootMargin:`0px 0px ${threshold}px 0px`}).observe(element):callback()}function formatMoney(cents,format=""){let value="";const placeholderRegex=/\{\{\s*(\w+)\s*\}\}/,formatString=format||"${{amount}}";typeof cents=="string"&&(cents=cents.replace(".",""));function defaultOption(opt,def){return typeof opt>"u"?def:opt}function formatWithDelimiters(number,precision,thousands,decimal){if(precision=defaultOption(precision,2),thousands=defaultOption(thousands,","),decimal=defaultOption(decimal,"."),isNaN(number)||number==null)return 0;number=(number/100).toFixed(precision);var parts=number.split("."),dollars=parts[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+thousands),cents2=parts[1]?decimal+parts[1]:"";return dollars+cents2}switch(formatString.match(placeholderRegex)[1]){case"amount":value=formatWithDelimiters(cents,2);break;case"amount_no_decimals":value=formatWithDelimiters(cents,0," ",".");break;case"amount_with_comma_separator":value=formatWithDelimiters(cents,2,".",".");break;case"amount_no_decimals_with_comma_separator":value=formatWithDelimiters(cents,0,".",".");break}return formatString.replace(placeholderRegex,value)}function getSectionDOM(html,selector=".shopify-section"){return new DOMParser().parseFromString(html,"text/html").querySelector(selector)}function updateHeaderCSSVariables(){var headerSection=headerSection||document.querySelector(".section-header"),announcementBarSection=announcementBarSection||document.querySelector(".section-announcement-bar");document.documentElement.style.setProperty("--l-viewport-height",`${visualViewport?.height??window.innerHeight}px`),document.documentElement.style.setProperty("--l-header-height",`${headerSection?.scrollHeight||0}px`),document.documentElement.style.setProperty("--l-announcement-bar-height",`${announcementBarSection?.scrollHeight||0}px`)}function lockBodyScroll(){document.documentElement.classList.add("js-block-page")}function unLockBodyScroll(){document.documentElement.classList.remove("js-block-page")}customElements.get("l-deferred-media")||customElements.define("l-deferred-media",class extends HTMLElement{constructor(){super();const poster=this.querySelector('[id^="Deferred-Poster-"]');this.videoEventsHandler(),poster&&poster.addEventListener("click",this.loadContent.bind(this))}loadContent(focus=!0){if(window.pauseAllMedia(),!this.getAttribute("loaded")){const content=document.createElement("div");content.appendChild(this.querySelector("template").content.firstElementChild.cloneNode(!0)),this.setAttribute("loaded",!0);const deferredElement=this.appendChild(content.querySelector("video, model-viewer, iframe"));focus&&deferredElement.focus(),deferredElement.nodeName=="VIDEO"&&deferredElement.getAttribute("autoplay")&&(deferredElement.play(),this.videoEventsHandler())}}videoEventsHandler(){this.videoEl=this.querySelector("video"),this.videoEl.addEventListener("play",()=>{this.classList.remove("is-paused")}),this.videoEl.addEventListener("pause",()=>{this.classList.add("is-paused")}),this.videoEl.addEventListener("ended",()=>{this.classList.add("is-paused")})}}),customElements.get("l-collapsible-tab")||customElements.define("l-collapsible-tab",class extends HTMLElement{constructor(){super()}connectedCallback(){this.init()}init(){this.setDefaultData(),this.attachEvents(),this.getAttribute("open")==="true"?(this.selected=!0,this.classList.add(this.expandedClass),this.setExpandedAria()):(this.content.style.height=this.collapsedHeight,this.classList.add(this.collapsedClass),this.setCollapsedAria()),this.content.removeAttribute("hidden")}setDefaultData(){this.expandedClass="is-expanded",this.collapsedClass="is-collapsed",this.transitionendEvent=this.transitionendEventName(),this.trigger=this.querySelector("[data-trigger]"),this.content=this.querySelector("[data-content]"),this.collapsedHeight="0px",this.defaultElements=["a","button","input:not(.focus-none)","[data-trigger]"],this.oneAtATime=!0,this.dataset.oneOpen==="false"&&(this.oneAtATime=!1)}attachEvents(){this.trigger.addEventListener("click",e=>this.toggle(e))}toggle(e){if(e.preventDefault(),this.selected?this.close():this.open(),this.selected&&this.oneAtATime){const tabsContainer=this.closest("[data-collapsible-wrapper]"),collapsibleTabs=tabsContainer?.querySelectorAll("l-collapsible-tab");collapsibleTabs?.length&&collapsibleTabs.forEach(tab=>{tab!==this&&tab.selected&&tabsContainer!==tab&&tab.close()})}}open(){this.selected=!0,this.expand(),this.setAttribute("open",!0)}close(){this.selected=!1,this.collapse(),this.removeAttribute("open")}expand(){const onTransitionEnd=(event=>{event.target===this.content&&(this.content.removeEventListener(this.transitionendEvent,onTransitionEnd),this.isOpen&&requestAnimationFrame(()=>{this.content.style.transition="0",this.content.style.height="auto",requestAnimationFrame(()=>{this.content.style.height=null,this.content.style.transition=null,this.setExpandedAria(),this.trySetTabIndex(this.content,0)})}))}).bind(this);this.content.addEventListener(this.transitionendEvent,onTransitionEnd),this.isOpen=!0,this.classList.add(this.expandedClass),this.classList.remove(this.collapsedClass),this.content.style.height=this.content.scrollHeight+"px"}collapse(){const onTransitionEnd=(event=>{event.target===this.content&&(this.content.removeEventListener(this.transitionendEvent,onTransitionEnd),this.isOpen||(this.setCollapsedAria(),this.classList.add(this.collapsedClass),this.trySetTabIndex(this.content,-1)))}).bind(this);this.content.addEventListener(this.transitionendEvent,onTransitionEnd),this.isOpen=!1,this.classList.remove(this.expandedClass),requestAnimationFrame(()=>{this.content.style.transition="0",this.content.style.height=this.content.scrollHeight+"px",requestAnimationFrame(()=>{this.content.style.transition=null,this.content.style.height=this.collapsedHeight})})}destroy(){this.trigger&&this.trigger.removeEventListener("click",e=>this.toggle(e)),this.content&&this.content.removeAttribute("aria-hidden"),this.content&&(this.content.style.height="auto"),this.classList.remove(this.expandedClass,this.collapsedClass),this.removeAttribute("open")}transitionendEventName(){let eventName,testElement=document.createElement("div"),eventNames={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(eventName in eventNames)if(eventNames.hasOwnProperty(eventName)&&testElement.style[eventName]!==!1)return eventNames[eventName]}trySetTabIndex(parentElement,tabIndex){const elements=parentElement.querySelectorAll(this.defaultElements);elements&&elements.forEach(e=>{e.setAttribute("tabindex",tabIndex)})}setExpandedAria(){this.trigger.setAttribute("aria-expanded","true"),this.content.setAttribute("aria-hidden","false")}setCollapsedAria(){this.trigger.setAttribute("aria-expanded","false"),this.content.setAttribute("aria-hidden","true")}}),customElements.get("l-swiper-carousel")||customElements.define("l-swiper-carousel",class extends HTMLElement{constructor(){super()}connectedCallback(){if(window.Swiper){this.setupCarousel();return}document.addEventListener("carousel:loaded",()=>{this.setupCarousel()})}setupCarousel(){this.carouselConfig=JSON.parse(this.querySelector("[data-carousel-config]").textContent),this.carouselConfig&&(this.classList.remove("is-placeholder"),this.querySelectorAll(".swiper-slide").forEach(swiperSlide=>swiperSlide.classList.remove("l-hidden")),this.swiperCarousel=new window.Swiper(this,this.carouselConfig))}slideTo(index=0){this.swiperCarousel.slideTo(index)}}),customElements.get("l-product-card")||customElements.define("l-product-card",class extends HTMLElement{constructor(){super()}connectedCallback(){this.addToCartBtnEl=this.querySelector("[data-product-card-atc]"),this.quickViewBtnEl=this.querySelector("[data-product-card-quick-view]"),this.addToCartBtnEl&&this.addToCartEvent(),this.quickViewBtnEl&&this.quickViewEvent()}addToCartEvent(){this.cart=document.getElementById("nav-drawer"),this.addToCartBtnEl.addEventListener("click",event=>{event.preventDefault(),this.addToCartBtnEl.classList.add("is-loading");const config=fetchConfig("javascript");config.headers["X-Requested-With"]="XMLHttpRequest",delete config.headers["Content-Type"];const formData=new FormData;formData.append("quantity","1"),formData.append("id",this.addToCartBtnEl.dataset.productCardAtc),config.body=formData,fetch(`${window.theme.routes.cart_add_url}`,config).then(response=>response.json()).then(response=>{if(!response.status){if(!this.cart){window.location=window.theme.routes.cart_url;return}window.getCart?.(),window.scrollToCartTop?.(),publish(PUB_SUB_EVENTS.cartUpdate,{source:"product-form",productVariantId:formData.get("id"),cartData:response}),document.dispatchEvent(new CustomEvent("theme:cart:add",{bubbles:!0,detail:{selector:this.addToCartBtnEl}})),this.error=!1}}).catch(e=>{console.error(e)}).finally(()=>{this.addToCartBtnEl.classList.remove("is-loading")})})}quickViewEvent(){this.productUrl=this.quickViewBtnEl.dataset.productCardQuickView,this.quickViewBtnEl.addEventListener("click",()=>{this.classList.add("is-loading"),publish(PUB_SUB_EVENTS.quickView.open,{source:"l-product-card",productUrl:this.productUrl}),debounce(()=>{this.classList.remove("is-loading")},2e3)()})}}),customElements.get("l-section-video")||customElements.define("l-section-video",class extends HTMLElement{constructor(){super()}connectedCallback(){this.playButtonEl=this.querySelector("[data-play-video-btn]"),this.playButtonLabelEl=this.querySelector("[data-button-label]"),this.playIconEl=this.querySelector("[data-play-icon]"),this.pauseIconEl=this.querySelector("[data-pause-icon]"),this.templateEl=this.querySelector("template"),this.sectionContentEl=this.querySelector("[data-section-content]"),this.sectionMediaEl=this.querySelector("[data-section-media]"),this.isVideoLoaded=!1,this.playButtonEl&&this.playButtonEl.addEventListener("click",event=>{if(event.preventDefault(),this.templateEl&&this.isVideoLoaded){this.videoEl.paused?this.playVideo():this.pauseVideo();return}this.templateEl?this.setInternalVideo():this.setupYoutubeVideo()})}setInternalVideo(){const stopEvents=["pause","ended"],videoTemplate=this.templateEl.content.cloneNode(!0);this.videoEl=videoTemplate.querySelector("video, iframe"),this.sectionMediaEl.appendChild(this.videoEl),this.isVideoLoaded=!0,this.videoEl.focus(),this.videoEl.tagName.toLowerCase()==="video"&&(this.sectionContentEl.classList.add("is-playing"),this.playVideo(),stopEvents.forEach(event=>{this.videoEl.addEventListener(event,()=>{this.sectionContentEl.classList.remove("is-playing"),this.pauseVideo()})}),this.videoEl.addEventListener("play",()=>{this.sectionContentEl.classList.add("is-playing"),this.playVideo(!1)}))}setupYoutubeVideo(){if(this.sectionContentEl.classList.add("l-hidden"),this.youtubePlayer){this.classList.remove("is-hide-youtube"),this.youtubePlayer.playVideo();return}this.youtubePlayer=new YT.Player(this.dataset.sectionId,{videoId:this.dataset.youtubeVideoId,events:{onReady:event=>{event.target.playVideo()},onStateChange:event=>{event.data==YT.PlayerState.ENDED&&(this.sectionContentEl.classList.remove("l-hidden"),this.classList.add("is-hide-youtube"))}}})}pauseVideo(){this.videoEl.pause(),this.playButtonLabelEl.textContent=this.playButtonLabelEl.dataset.buttonLabel,this.playIconEl.classList.remove("l-hidden"),this.pauseIconEl.classList.add("l-hidden")}playVideo(isPlay=!0){isPlay&&this.videoEl.play(),this.playButtonLabelEl.textContent=window.theme.strings.pause_video||"Pause Video",this.playIconEl.classList.add("l-hidden"),this.pauseIconEl.classList.remove("l-hidden")}}),customElements.get("l-setup-option-cards")||customElements.define("l-setup-option-cards",class extends HTMLElement{constructor(){super()}connectedCallback(){this.triggerMediaBtnEls=this.querySelectorAll("[data-trigger-guide-btn]"),this.mediaEls=this.querySelectorAll("[data-option-media]"),this.optionGuideTitleEls=this.querySelectorAll("[data-option-guide-cards-title]"),this.optionGuideCardEls=this.querySelectorAll("[data-option-guide-cards]"),this.changeMedia()}changeMedia(){this.triggerMediaBtnEls.forEach(triggerMediaBtnEl=>{triggerMediaBtnEl.addEventListener("click",event=>{event.preventDefault();const mediaId=triggerMediaBtnEl.dataset.triggerGuideBtn;this.triggerMediaBtnEls.forEach(_triggerMediaBtnEl=>{_triggerMediaBtnEl.classList.toggle("is-active",_triggerMediaBtnEl==triggerMediaBtnEl)}),pauseAllMedia(),this.optionGuideTitleEls.forEach(optionGuideTitleEl=>{optionGuideTitleEl.classList.toggle("l-hidden",optionGuideTitleEl.dataset.optionGuideCardsTitle!=mediaId)}),this.optionGuideCardEls.forEach(optionGuideCardEl=>{optionGuideCardEl.classList.toggle("l-hidden",optionGuideCardEl.dataset.optionGuideCards!=mediaId)}),this.mediaEls.forEach(mediaEl=>{if(mediaEl.classList.toggle("l-hidden",mediaEl.dataset.optionMedia!=mediaId),mediaEl.dataset.optionMedia==mediaId&&!mediaEl.querySelector("video")){const content=document.createElement("div");content.appendChild(mediaEl.querySelector("template").content.firstElementChild.cloneNode(!0));const deferredElement=mediaEl.appendChild(content.querySelector("video"))}})})})}}),customElements.get("l-product-recommendations")||customElements.define("l-product-recommendations",class extends HTMLElement{observer=void 0;constructor(){super()}connectedCallback(){this.initializeRecommendations(this.dataset.productId)}initializeRecommendations(productId){this.observer?.unobserve(this),this.observer=new IntersectionObserver((entries,observer)=>{entries[0].isIntersecting&&(observer.unobserve(this),this.loadRecommendations(productId))},{rootMargin:"0px 0px 400px 0px"}),this.observer.observe(this)}loadRecommendations(productId){fetch(`${this.dataset.url}&product_id=${productId}&section_id=${this.dataset.sectionId}`).then(response=>response.text()).then(text=>{const html=document.createElement("div");html.innerHTML=text;const recommendations=html.querySelector("l-product-recommendations");recommendations?.innerHTML.trim().length&&(this.innerHTML=recommendations.innerHTML)}).catch(e=>{console.error(e)})}}),customElements.get("l-text-carousel-images")||customElements.define("l-text-carousel-images",class extends HTMLElement{constructor(){super()}connectedCallback(){if(window.Swiper){this.setupCarousel();return}document.addEventListener("carousel:loaded",()=>{this.setupCarousel()})}setupCarousel(){const mediaSwiperEl=this.querySelector("[data-media-swiper]"),mediaCarouselConfig=JSON.parse(mediaSwiperEl.querySelector("[data-carousel-config]").textContent);mediaSwiperEl.classList.remove("is-placeholder"),mediaSwiperEl.querySelectorAll(".swiper-slide").forEach(swiperSlide=>swiperSlide.classList.remove("l-hidden")),this.mediaSwiper=new window.Swiper(mediaSwiperEl,{...mediaCarouselConfig,on:{init:swiper=>{swiper.autoplay.pause(),this.onAutoPlayOnHover()}}});const contentSwiperEl=this.querySelector("[data-content-swiper]"),contentCarouselConfig=JSON.parse(contentSwiperEl.querySelector("[data-carousel-config]").textContent);contentSwiperEl.classList.remove("is-placeholder"),contentSwiperEl.querySelectorAll(".swiper-slide").forEach(swiperSlide=>swiperSlide.classList.remove("l-hidden")),this.contentSwiper=new window.Swiper(contentSwiperEl,contentCarouselConfig),this.mediaSwiper.controller.control=this.contentSwiper}onAutoPlayOnHover(){new IntersectionObserver(entries=>{entries.forEach(entry=>{entry.isIntersecting?this.mediaSwiper.autoplay.start():this.mediaSwiper.autoplay.stop()})},{threshold:.5}).observe(this)}slideTo(index=0){this.swiperCarousel.slideTo(index)}}),customElements.get("l-main-blog")||customElements.define("l-main-blog",class extends HTMLElement{constructor(){super()}connectedCallback(){this.loadMoreBtnEl=this.querySelector("[data-load-more]"),this.blogGridEl=this.querySelector("[data-blog-grid]"),this.loadMoreType=this.dataset.loadMoreType||"button",this.addAnchorToBlogTags(),this.loadMoreBtnEl&&this.blogGridEl&&(this.currentPage=parseInt(this.dataset.currentPage)||1,this.maxPages=parseInt(this.dataset.maxPages)||1,this.loadMoreType==="button"&&this.loadMoreBtnEl.addEventListener("click",this.loadMorePosts.bind(this)),this.loadMoreType==="scroll"&&window.addEventListener("scroll",debounce(()=>{const sectionBottom=this.getBoundingClientRect().bottom;window.innerHeight+500>=sectionBottom&&this.currentPage<this.maxPages&&this.loadMorePosts()},30)))}loadMorePosts(){const url=`${this.dataset.url}?page=${this.currentPage+1}&section_id=${this.dataset.sectionId}`;this.loadMoreBtnEl.classList.add("is-loading"),fetch(url).then(response=>response.text()).then(text=>{const html=document.createElement("div");html.innerHTML=text;const newPosts=html.querySelector("[data-blog-grid]").innerHTML,tempDiv=document.createElement("div");tempDiv.innerHTML=newPosts,tempDiv.querySelectorAll("img").forEach(img=>{const preloadedImg=new Image;preloadedImg.src=img.src}),this.blogGridEl.insertAdjacentHTML("beforeend",tempDiv.innerHTML),this.currentPage+=1,this.currentPage>=this.maxPages&&this.loadMoreBtnEl.classList.add("l-hidden")}).finally(()=>{this.loadMoreBtnEl.classList.remove("is-loading")})}addAnchorToBlogTags(){this.querySelectorAll("[data-tags] a").forEach(tag=>{tag.setAttribute("href",`${tag.getAttribute("href")}#mainBlog`)})}}),customElements.get("l-rider-profiles")||customElements.define("l-rider-profiles",class extends HTMLElement{constructor(){super()}connectedCallback(){this.bottomImageEls=this.querySelectorAll("[data-bottom-image]"),this.swiperCarouselEls=this.querySelectorAll("l-swiper-carousel"),this.profileEls=this.querySelectorAll("[data-profile]"),this.changeProfileEls=this.querySelectorAll("[data-change-profile-btn]"),this.paginationBulletEls=this.querySelectorAll("[data-pagination-bullet]"),this.setupZoomFeature(),this.setupNextSlide()}setupZoomFeature(){this.bottomImageEls.forEach(bottomImageEl=>{new window.mediaZoom(bottomImageEl)})}setupNextSlide(){this.changeProfileEls.forEach(changeProfileEl=>{changeProfileEl.addEventListener("click",()=>{const nextAthleteIndex=parseInt(changeProfileEl.dataset.changeProfileBtn);this.slideTo(nextAthleteIndex)})}),this.paginationBulletEls.forEach(paginationBulletEl=>{paginationBulletEl.addEventListener("click",()=>{const nextSlideIndex=parseInt(paginationBulletEl.dataset.paginationBullet);this.slideTo(nextSlideIndex)})})}slideTo(index=0){this.swiperCarouselEls.forEach(swiperCarouselEl=>{swiperCarouselEl.slideTo(index)}),this.profileEls.forEach(profileEl=>{const profileIndex=parseInt(profileEl.dataset.profile);profileEl.classList.toggle("is-active",profileIndex===index)}),debounce(()=>{window.scrollTo({top:0,behavior:"smooth"})},400)()}}),customElements.get("l-single-rider-profile")||customElements.define("l-single-rider-profile",class extends HTMLElement{constructor(){super()}connectedCallback(){this.mediaGroupEls=this.querySelectorAll("[data-media-zoom]"),this.thumbnailTriggerEls=this.querySelectorAll("[data-trigger-main-media]"),this.mainMediaEls=this.querySelectorAll("[data-main-media]"),this.profileEls=this.querySelectorAll("[data-profile]"),this.setupZoomFeature(),document.addEventListener("carousel:loaded",()=>{this.setupCarouselEvents()})}setupCarouselEvents(){this.mainMediaEls.forEach(mainMediaEl=>{const carouselConfig=JSON.parse(mainMediaEl.querySelector("[data-carousel-config]").textContent),mainSwiperCarousel=new window.Swiper(mainMediaEl,carouselConfig);mainSwiperCarousel.on("slideChange",swiper=>{const activeSlideIndex=parseInt(swiper.activeIndex);this.thumbnailTriggerEls.forEach((thumbnailTriggerEl,index0)=>{thumbnailTriggerEl.classList.toggle("is-active",index0==activeSlideIndex)}),this.profileEls.forEach((profileEl,index0)=>{profileEl.classList.toggle("l-hidden",index0!=activeSlideIndex)})}),this.thumbnailTriggerEls.forEach(thumbnailTriggerEl=>{const slideIndex=thumbnailTriggerEl.dataset.triggerMainMedia;thumbnailTriggerEl.addEventListener("click",()=>{mainSwiperCarousel.slides.forEach((slide,index0)=>{const dataMedia=slide.dataset.mediaId;slideIndex==dataMedia&&mainSwiperCarousel.slideTo(index0)}),this.thumbnailTriggerEls.forEach(_thumbnailTriggerEl=>{_thumbnailTriggerEl.classList.toggle("is-active",_thumbnailTriggerEl===thumbnailTriggerEl)})})})})}setupZoomFeature(){this.mediaGroupEls.forEach(mediaGroupEl=>{new window.mediaZoom(mediaGroupEl)})}}),customElements.get("l-timeline-journey")||customElements.define("l-timeline-journey",class extends HTMLElement{constructor(){super()}connectedCallback(){document.addEventListener("gsap:loaded",()=>{this.setupGsap()})}setupGsap(){gsap.registerPlugin(ScrollTrigger,Draggable);const sections=this.querySelectorAll("[data-timeline-journey]"),wrapper=this.offsetHeight<window.innerHeight?this:this.querySelector("[data-wrapper]"),dragProxy=this.querySelector("[data-drag-proxy]"),desktop=window.matchMedia("(min-width: 1024px)").matches;let maxWidth=0;const getMaxWidth=()=>{maxWidth=0,sections.forEach(section=>{maxWidth+=section.offsetWidth+(desktop?10:6)})};getMaxWidth(),ScrollTrigger.addEventListener("refreshInit",getMaxWidth);let scrollTween=gsap.to(sections,{x:()=>`-${maxWidth-window.innerWidth}`,ease:"none"}),horizontalScroll=ScrollTrigger.create({animation:scrollTween,trigger:wrapper,pin:!0,scrub:!0,end:()=>`+=${maxWidth}`,invalidateOnRefresh:!0,onRefresh:self=>{self.refresh()}});sections.forEach((sct,i)=>{ScrollTrigger.create({trigger:sct,start:()=>"top top-="+(sct.offsetLeft-window.innerWidth/2)*(maxWidth/(maxWidth-window.innerWidth)),end:()=>"+="+sct.offsetWidth*(maxWidth/(maxWidth-window.innerWidth)),toggleClass:{targets:sct,className:"active"},onRefresh:self=>{self.refresh()}})});const dragRatio=maxWidth/(maxWidth-window.innerWidth),drag=Draggable.create(dragProxy,{trigger:wrapper,type:"x",inertia:!0,allowContextMenu:!0,onPress(){this.startScroll=horizontalScroll.scroll()},onDrag(){horizontalScroll.scroll(this.startScroll-(this.x-this.startX)*dragRatio)},onThrowUpdate(){horizontalScroll.scroll(this.startScroll-(this.x-this.startX)*dragRatio)}})[0]}carouselEventHandler(){if(window.Swiper){this.setupCarousel();return}document.addEventListener("carousel:loaded",()=>{this.setupCarousel()})}setupCarousel(){this.carouselConfig=JSON.parse(this.querySelector("[data-carousel-config]").textContent),this.carouselConfig&&(this.classList.remove("is-placeholder"),this.querySelectorAll(".swiper-slide").forEach(swiperSlide=>swiperSlide.classList.remove("l-hidden")),this.swiperCarousel=new window.Swiper(this,this.carouselConfig),this.swiperCarousel.on("slideChange",swiper=>{if(swiper.progress==1){const sectionPosition=this.getBoundingClientRect().bottom+window.scrollY;window.scrollTo({top:sectionPosition,behavior:"smooth"});return}if(swiper.progress==0){const sectionPosition=this.scrollTop+window.scrollY;window.scrollTo({top:sectionPosition,behavior:"smooth"})}}))}slideTo(index=0){this.swiperCarousel.slideTo(index)}}),customElements.get("l-scroll-banner")||customElements.define("l-scroll-banner",class extends HTMLElement{constructor(){super()}connectedCallback(){if(window.gsap){this.setupGsap();return}document.addEventListener("gsap:loaded",()=>{this.zoomVideo()})}zoomVideo(){const contentEl=this.querySelector(".js-section-scroll-trigger-content-desktop"),mediaComponentEl=this.querySelector(".js-section-scroll-trigger-media-desktop"),videoEl=mediaComponentEl.querySelector(".l-media-ratio");gsap.fromTo(videoEl,{scale:1,width:"80%"},{scrollTrigger:{trigger:contentEl,start:()=>contentEl.offsetHeight<window.innerHeight?"clamp(top top)":"clamp(top 60%)",pin:!0,pinSpacing:!1,scrub:!0,toggleActions:"play pause resume reset",onRefresh:self=>{self.refresh()},onLeave:()=>{mediaComponentEl.style.setProperty("--l-media-content-position","absolute"),mediaComponentEl.style.setProperty("--l-media-content-opacity",0)},onEnterBack:()=>{mediaComponentEl.style.setProperty("--l-media-content-position","fixed"),mediaComponentEl.style.setProperty("--l-media-content-opacity",1)}},scale:1,width:"100%",onStart:()=>{mediaComponentEl.style.setProperty("--l-media-content-position","fixed"),mediaComponentEl.style.setProperty("--l-media-content-opacity",1)},onReverseComplete:()=>{console.log("onReverseComplete")},onComplete:()=>{}})}}),customElements.get("l-setup-option-guide")||customElements.define("l-setup-option-guide",class extends HTMLElement{constructor(){super()}connectedCallback(){this.triggerContentEls=this.querySelectorAll("[data-trigger-content]"),this.overlayContentEl=this.querySelector("[data-overlay-content]"),this.triggerContentEls.forEach(triggerContentEl=>{triggerContentEl.addEventListener("click",()=>{this.overlayContentEl.classList.toggle("is-active")})})}}),customElements.get("l-section-design-guides")||customElements.define("l-section-design-guides",class extends HTMLElement{constructor(){super()}connectedCallback(){this.filterTagEls=this.querySelectorAll("[data-filter-tag]"),this.designCardEls=this.querySelectorAll("[data-card]"),this.currentTags=[],this.filterTagEls.forEach(filterTagEl=>{filterTagEl.addEventListener("click",()=>{const filterTag=filterTagEl.dataset.filterTag,isActive=filterTagEl.classList.contains("is-active");filterTagEl.classList.toggle("is-active",!isActive),isActive?this.currentTags=this.currentTags.filter(tag=>tag!==filterTag):this.currentTags.push(filterTag),this.designCardEls.forEach(designCardEl=>{designCardEl.classList.toggle("l-hidden",this.currentTags.length>0&&!this.currentTags.includes(designCardEl.dataset.card))})})})}}),customElements.get("l-product-feature-box")||customElements.define("l-product-feature-box",class extends HTMLElement{constructor(){super()}connectedCallback(){this.hotspotEl=document.getElementById(this.dataset.hotspotId),this.setupToggleEventOnDesktop(),this.setupPosition(),window.addEventListener("resize",debounce(()=>{this.classList.add("is-resizing"),debounce(()=>{this.setupPosition()},1e3)()},20))}setupToggleEventOnDesktop(){this.featureBoxes=this.parentElement.querySelectorAll("l-product-feature-box"),this.currentContentEl=document.querySelector(`[data-feature-content="ProductFeatureContent-${this.dataset.blockId}"][data-media-query="(min-width: 1024px)"]`),this.currentContentEl&&(this.toggleButtonEl=this.currentContentEl.parentElement.querySelector("button"),this.toggleButtonEl.addEventListener("click",()=>{this.currentContentEl.classList.toggle("is-active");const isActive=this.currentContentEl.classList.contains("is-active");this.featureBoxes.forEach(featureBox=>{featureBox!==this&&featureBox.toggleBoxStatus(!1)}),this.toggleBoxStatus(isActive)}))}toggleBoxStatus(isActive){this.currentContentEl.classList.toggle("is-active",isActive),this.toggleButtonEl&&this.toggleButtonEl.classList.toggle("is-active",isActive),this.classList.toggle("is-active",isActive),this.hotspotEl.classList.toggle("is-active",isActive),this.setupPosition()}setupPosition(){let mediaQuery="(min-width: 1024px)";window.matchMedia(mediaQuery).matches||(mediaQuery="(max-width: 1023px)");let currentContentEl=document.querySelector(`[data-feature-content="ProductFeatureContent-${this.dataset.blockId}"][data-media-query="${mediaQuery}"]`);currentContentEl&&(mediaQuery=="(min-width: 1024px)"?this.updateOnDesktop(currentContentEl):this.updateOnMobile(currentContentEl))}updateOnMobile(currentContentEl){const contentRect=currentContentEl.getBoundingClientRect(),hotspotRect=this.hotspotEl.getBoundingClientRect(),containerRect=this.getBoundingClientRect(),positionBoxTop=Math.min(contentRect.top,hotspotRect.top)-containerRect.top;let positionBoxLeft=Math.min(contentRect.left,hotspotRect.left)-containerRect.left;const positionBoxWidth=Math.max(contentRect.right,hotspotRect.right)-positionBoxLeft-containerRect.left,positionBoxHeight=Math.abs(hotspotRect.top-contentRect.top);this.style.setProperty("--l-position-box-top",`${positionBoxTop}px`),this.style.setProperty("--l-position-box-left",`${positionBoxLeft}px`),this.style.setProperty("--l-position-box-width",`${positionBoxWidth-hotspotRect.width/2}px`),this.style.setProperty("--l-position-box-height",`${positionBoxHeight+hotspotRect.width/2}px`);const showBottomBorder=contentRect.top<=hotspotRect.top;this.style.setProperty("--l-top-border","1px"),this.style.setProperty("--l-left-border","0"),this.style.setProperty("--l-right-border","1px"),this.style.setProperty("--l-bottom-border","0"),this.style.setProperty("--l-bottom-border-width",`${contentRect.right-hotspotRect.right}px`),this.classList.toggle("is-mobile-bottom-border",showBottomBorder),this.classList.remove("is-resizing")}updateOnDesktop(currentContentEl){const contentRect=currentContentEl.getBoundingClientRect(),hotspotRect=this.hotspotEl.getBoundingClientRect(),containerRect=this.getBoundingClientRect(),positionBoxTop=Math.min(contentRect.top,hotspotRect.top)-containerRect.top;let positionBoxLeft=Math.min(contentRect.left,hotspotRect.left)-containerRect.left;const positionBoxWidth=Math.max(contentRect.right,hotspotRect.right)-positionBoxLeft-containerRect.left,positionBoxHeight=Math.abs(hotspotRect.top-contentRect.top);hotspotRect.left<contentRect.left?positionBoxLeft+=hotspotRect.width/2-1:positionBoxLeft-=hotspotRect.width/2-1,this.style.setProperty("--l-position-box-top",`${positionBoxTop}px`),this.style.setProperty("--l-position-box-left",`${positionBoxLeft}px`),this.style.setProperty("--l-position-box-width",`${positionBoxWidth}px`),this.style.setProperty("--l-position-box-height",`${positionBoxHeight}px`);const showTopBorder=contentRect.top<hotspotRect.top,showLeftBorder=contentRect.left<hotspotRect.left,showRightBorder=contentRect.right>hotspotRect.right,showBottomBorder=contentRect.bottom>hotspotRect.bottom,positionClass=`${showTopBorder?"top":""}${showBottomBorder?"bottom":""}-${showLeftBorder?"left":""}${showRightBorder?"right":""}`;this.classList.add(`is-${positionClass}`),this.style.setProperty("--l-top-border",showTopBorder?"1px":"0"),this.style.setProperty("--l-right-border",showLeftBorder?"1px":"0"),this.style.setProperty("--l-left-border",showLeftBorder?"0":showRightBorder?"1px":"0"),this.style.setProperty("--l-bottom-border",showTopBorder?"0":showBottomBorder?"1px":"0"),this.classList.remove("is-resizing")}}),customElements.get("l-product-features-carousel")||customElements.define("l-product-features-carousel",class extends HTMLElement{constructor(){super()}connectedCallback(){if(window.Swiper){this.setupCarousel();return}document.addEventListener("carousel:loaded",()=>{this.setupCarousel()})}setupCarousel(){this.carouselConfig=JSON.parse(this.querySelector("[data-carousel-config]").textContent),this.carouselConfig&&(this.classList.remove("is-placeholder"),this.querySelectorAll(".swiper-slide").forEach(swiperSlide=>swiperSlide.classList.remove("l-hidden")),this.swiperCarousel=new window.Swiper(this,this.carouselConfig),this.setActiveFeatureBox(0),this.swiperCarousel.on("slideChange",swiper=>{this.setActiveFeatureBox(swiper.activeIndex)}))}setActiveFeatureBox(activeIndex){this.productFeaturesEl=this.productFeaturesEl||this.closest("[data-product-features]"),this.featureBoxEls=this.productFeaturesEl.querySelectorAll("l-product-feature-box"),this.featureBoxEls.forEach(featureBoxEl=>{const index=parseInt(featureBoxEl.dataset.index);featureBoxEl.setupPosition(),featureBoxEl.toggleBoxStatus(index==activeIndex)})}slideTo(index=0){this.swiperCarousel.slideTo(index)}}),customElements.get("l-product-info")||customElements.define("l-product-info",class extends HTMLElement{quantityInput=void 0;quantityForm=void 0;onVariantChangeUnsubscriber=void 0;cartUpdateUnsubscriber=void 0;abortController=void 0;pendingRequestUrl=null;preProcessHtmlCallbacks=[];postProcessHtmlCallbacks=[];constructor(){super()}connectedCallback(){this.initializeProductSwapUtility(),this.dispatchEvent(new CustomEvent("product-info:loaded",{bubbles:!0})),this.onVariantChangeUnsubscriber=subscribe(PUB_SUB_EVENTS.optionValueSelectionChange,this.handleOptionValueChange.bind(this))}disconnectedCallback(){this.onVariantChangeUnsubscriber(),this.cartUpdateUnsubscriber?.()}addPreProcessCallback(callback){this.preProcessHtmlCallbacks.push(callback)}initializeProductSwapUtility(){this.postProcessHtmlCallbacks.push(newNode=>{window?.Shopify?.PaymentButton?.init(),window?.ProductModel?.loadShopifyXR()})}handleOptionValueChange({data:{event,target,selectedOptionValues}}){if(!this.contains(event.target))return;this.resetProductFormState();const productUrl=target.dataset.productUrl||this.pendingRequestUrl||this.dataset.url;this.pendingRequestUrl=productUrl;const shouldSwapProduct=this.dataset.url!==productUrl,shouldFetchFullPage=this.dataset.updateUrl==="true"&&shouldSwapProduct;this.renderProductInfo({requestUrl:this.buildRequestUrlWithParams(productUrl,selectedOptionValues,shouldFetchFullPage),targetId:target.id,callback:shouldSwapProduct?this.handleSwapProduct(productUrl,shouldFetchFullPage):this.handleUpdateProductInfo(productUrl)})}resetProductFormState(){const productForm=this.productForm;productForm?.toggleSubmitButton(!0,null,!1),productForm?.handleErrorMessage()}renderProductInfo({requestUrl,targetId,callback}){this.abortController?.abort(),this.abortController=new AbortController,fetch(requestUrl,{signal:this.abortController.signal}).then(response=>response.text()).then(responseText=>{this.pendingRequestUrl=null;const html=new DOMParser().parseFromString(responseText,"text/html");callback(html)}).then(()=>{document.querySelector(`#${targetId}`)?.focus()}).catch(error=>{console.error(error),error.name==="AbortError"?console.log("Fetch aborted by user"):console.error(error)})}handleSwapProduct(productUrl,updateFullPage){return html=>{const selector=updateFullPage?"product-info[id^='MainProduct']":"product-info",variant=this.getSelectedVariant(html.querySelector(selector));this.updateURL(productUrl,variant?.id),updateFullPage?(document.querySelector("head title").innerHTML=html.querySelector("head title").innerHTML,HTMLUpdateUtility.viewTransition(document.querySelector("main"),html.querySelector("main"),this.preProcessHtmlCallbacks,this.postProcessHtmlCallbacks)):HTMLUpdateUtility.viewTransition(this,html.querySelector("product-info"),this.preProcessHtmlCallbacks,this.postProcessHtmlCallbacks)}}handleUpdateProductInfo(productUrl){return html=>{const variant=this.getSelectedVariant(html);if(this.updateOptionValues(html),this.updateURL(productUrl,variant?.id),this.updateVariantInputs(variant?.id),!variant){this.setUnavailable();return}const updateSourceFromDestination=(id,shouldHide=source=>!1)=>{const source=html.getElementById(`${id}-${this.sectionId}`),destination=this.querySelector(`#${id}-${this.dataset.section}`);source&&destination&&(destination.innerHTML=source.innerHTML,destination.classList.toggle("hidden",shouldHide(source)))};updateSourceFromDestination("price"),updateSourceFromDestination("ProductSubmitButton"),updateSourceFromDestination("media-atc"),this.productForm?.toggleSubmitButton(html.getElementById(`ProductSubmitButton-${this.sectionId}`)?.hasAttribute("disabled")??!0,window.theme.strings.sold_out,!1),publish(PUB_SUB_EVENTS.variantChange,{data:{sectionId:this.sectionId,html,variant}})}}updateOptionValues(html){const variantSelects=html.querySelector("l-variant-selects");variantSelects&&HTMLUpdateUtility.viewTransition(this.variantSelectors,variantSelects,this.preProcessHtmlCallbacks)}updateURL(url,variantId){this.dataset.updateUrl!=="false"&&window.history.replaceState({},"",`${url}${variantId?`?variant=${variantId}`:""}`)}updateVariantInputs(variantId){this.querySelectorAll(`#product-form-${this.dataset.section}, #product-form-installment-${this.dataset.section}`).forEach(productForm=>{const input=productForm.querySelector('input[name="id"]');input.value=variantId??"",input.dispatchEvent(new Event("change",{bubbles:!0}))})}setUnavailable(){this.productForm?.toggleSubmitButton(!0,window.theme.strings.unavailable);const selectors=["price","Inventory","Sku","Price-Per-Item","Volume-Note","Volume","Quantity-Rules"].map(id=>`#${id}-${this.dataset.section}`).join(", ");document.querySelectorAll(selectors).forEach(({classList})=>classList.add("hidden"))}getSelectedVariant(productInfoNode){const selectedVariant=productInfoNode.querySelector("l-variant-selects [data-selected-variant]")?.innerHTML;return selectedVariant?JSON.parse(selectedVariant):null}buildRequestUrlWithParams(url,optionValues,shouldFetchFullPage=!1){const params=[];return!shouldFetchFullPage&&params.push(`section_id=${this.sectionId}`),optionValues.length&&params.push(`option_values=${optionValues.join(",")}`),`${url}?${params.join("&")}`}get productForm(){return this.querySelector("l-product-form")}get variantSelectors(){return this.querySelector("l-variant-selects")}get sectionId(){return this.dataset.originalSection||this.dataset.section}}),customElements.get("l-product-form")||customElements.define("l-product-form",class extends HTMLElement{constructor(){super()}connectedCallback(){this.form=this.querySelector("form"),this.cart=document.getElementById("nav-drawer"),this.submitButton=this.querySelector('[type="submit"]'),this.submitButtonText=this.submitButton.querySelector("[data-add-to-cart-label]"),this.sectionId=this.dataset.sectionId,this.hideErrors=this.dataset.hideErrors==="true",this.form.addEventListener("submit",this.onSubmitHandler.bind(this))}onSubmitHandler(evt){if(evt.preventDefault(),this.submitButton.getAttribute("aria-disabled")==="true")return;this.submitButton.setAttribute("aria-disabled",!0),this.submitButton.classList.add("is-loading");const config=fetchConfig("javascript");config.headers["X-Requested-With"]="XMLHttpRequest",delete config.headers["Content-Type"];const formData=new FormData(this.form);config.body=formData,fetch(`${window.theme.routes.cart_add_url}`,config).then(response=>response.json()).then(response=>{if(response.status){publish(PUB_SUB_EVENTS.cartError,{source:"product-form",productVariantId:formData.get("id"),errors:response.errors||response.description,message:response.message}),this.handleErrorMessage(response.description);const soldOutMessage=this.submitButton.querySelector("[data-sold-out-label]");soldOutMessage&&(this.submitButton.setAttribute("aria-disabled",!0),this.submitButtonText.classList.add("hidden"),soldOutMessage.classList.remove("hidden"),this.error=!0);return}else if(!this.cart){window.location=window.theme.routes.cart_url;return}window.getCart?.(),window.scrollToCartTop?.(),publish(PUB_SUB_EVENTS.cartUpdate,{source:"product-form",productVariantId:formData.get("id"),cartData:response}),document.dispatchEvent(new CustomEvent("theme:cart:add",{bubbles:!0,detail:{selector:this.submitButton}})),this.error=!1}).catch(e=>{console.error(e)}).finally(()=>{this.submitButton.classList.remove("is-loading"),this.error||this.submitButton.removeAttribute("aria-disabled")})}handleErrorMessage(errorMessage=!1){this.hideErrors||(this.errorMessageWrapper||(this.errorMessageWrapper=document.getElementById(`ProductErrorMessages-${this.sectionId}`),this.errorMessage=this.errorMessageWrapper.querySelector("[data-error-message]")),this.errorMessageWrapper&&(this.errorMessageWrapper.classList.toggle("hidden",!errorMessage),errorMessage&&(this.errorMessage.textContent=errorMessage),debounce(()=>{this.errorMessageWrapper.classList.add("hidden")},4e3)()))}toggleSubmitButton(disable=!0,text,needToUpdateText=!0){if(disable){this.submitButton.setAttribute("disabled","disabled"),text&&(this.submitButtonText.textContent=text);return}this.submitButton.removeAttribute("disabled"),needToUpdateText&&(this.submitButtonText.textContent=window.theme.strings.add_to_cart)}get variantIdInput(){return this.form.querySelector("[name=id]")}}),customElements.get("l-variant-selects")||customElements.define("l-variant-selects",class extends HTMLElement{constructor(){super()}connectedCallback(){this.addEventListener("change",event=>{const target=this.getInputForEventTarget(event.target);this.updateSelectionMetadata(event),publish(PUB_SUB_EVENTS.optionValueSelectionChange,{data:{event,target,selectedOptionValues:this.selectedOptionValues}})})}updateSelectionMetadata({target}){const{value,tagName}=target;if(!(tagName==="SELECT"&&target.selectedOptions.length)&&target.hasAttribute("data-product-variant-input")){const selectedSwatchValue=target.closest("[data-variant-options]").querySelector("[data-selected-value]");selectedSwatchValue&&(selectedSwatchValue.innerHTML=value)}}getInputForEventTarget(target){return target.tagName==="SELECT"?target.selectedOptions[0]:target}get selectedOptionValues(){return Array.from(this.querySelectorAll("[data-variant-select] option[selected], [data-product-variant-input]:checked")).map(({dataset})=>dataset.optionValueId)}}),customElements.get("l-product-quantity-input")||customElements.define("l-product-quantity-input",class extends HTMLElement{constructor(){super()}quantityUpdateUnsubscriber=void 0;connectedCallback(){this.input=this.querySelector("input"),this.changeEvent=new Event("change",{bubbles:!0}),this.input.addEventListener("change",()=>{this.validateQtyRules()}),this.querySelectorAll("button").forEach(button=>button.addEventListener("click",this.onButtonClick.bind(this))),this.quantityUpdateUnsubscriber=subscribe(PUB_SUB_EVENTS.quantityUpdate,this.validateQtyRules.bind(this)),this.validateQtyRules()}disconnectedCallback(){this.quantityUpdateUnsubscriber&&this.quantityUpdateUnsubscriber()}onButtonClick(event){event.preventDefault();const previousValue=this.input.value;event.target.name==="plus"?parseInt(this.input.dataset.min)>parseInt(this.input.step)&&this.input.value==0?this.input.value=this.input.dataset.min:this.input.stepUp():this.input.stepDown(),previousValue!==this.input.value&&this.input.dispatchEvent(this.changeEvent),this.input.dataset.min===previousValue&&event.target.name==="minus"&&(this.input.value=parseInt(this.input.min))}validateQtyRules(){const value=parseInt(this.input.value);if(this.input.min&&this.querySelector("button[name='minus']").classList.toggle("disabled",parseInt(value)<=parseInt(this.input.min)),this.input.max){const max=parseInt(this.input.max);this.querySelector("button[name='plus']").classList.toggle("disabled",value>=max)}}}),customElements.get("l-product-controls")||customElements.define("l-product-controls",class extends HTMLElement{constructor(){super()}connectedCallback(){this.quantityFormEl=this.querySelector("l-product-quantity-input"),this.quantityInputEl=this.quantityFormEl?.querySelector("input"),this.productForm=this.querySelector("l-product-form"),!(!this.quantityInputEl||!this.quantityFormEl)&&(this.variantChangeUnsubscriber=subscribe(PUB_SUB_EVENTS.variantChange,this.updateQuantityRules.bind(this)),this.setQuantityBoundries())}disconnectedCallback(){this.variantChangeUnsubscriber&&this.variantChangeUnsubscriber()}setQuantityBoundries(){const quantityDataset=this.quantityInputEl.dataset,data={cartQuantity:quantityDataset.cartQuantity?parseInt(quantityDataset.cartQuantity):0,min:quantityDataset.min?parseInt(quantityDataset.min):1,max:quantityDataset.max?parseInt(quantityDataset.max):null,step:this.quantityInputEl.step?parseInt(this.quantityInputEl.step):1};let min=data.min;const max=data.max===null?data.max:data.max-data.cartQuantity;max!==null&&(min=Math.min(min,max)),data.cartQuantity>=data.min&&(min=Math.min(min,data.step)),this.quantityInputEl.min=min,this.quantityInputEl.value=min,max?this.quantityInputEl.max=max:this.quantityInputEl.removeAttribute("max"),publish(PUB_SUB_EVENTS.quantityUpdate,void 0)}updateQuantityRules({data}){const{html,sectionId}=data,quantityFormUpdated=html.getElementById(`Product-Form-Controls-${sectionId}`),selectors=["[data-product-quantity-input]","[data-quantity-label]"];for(let selector of selectors){const current=this.querySelector(selector),updated=quantityFormUpdated.querySelector(selector);if(!(!current||!updated))if(selector==="[data-product-quantity-input]"){const attributes=["data-cart-quantity","data-min","data-max","step"];for(let attribute of attributes){const valueUpdated=updated.getAttribute(attribute);valueUpdated!==null?current.setAttribute(attribute,valueUpdated):current.removeAttribute(attribute)}}else current.innerHTML=updated.innerHTML}this.setQuantityBoundries()}}),customElements.get("l-product-delivery-estimation")||customElements.define("l-product-delivery-estimation",class extends HTMLElement{constructor(){super()}connectedCallback(){this.minDeliveryDateEl=this.querySelector("[data-min-delivery-text]"),this.maxDeliveryDateEl=this.querySelector("[data-max-delivery-text]"),this.minDays=parseInt(this.dataset.minDays),this.maxDays=parseInt(this.dataset.maxDays);const today=new Date;this.minDeliveryDateEl&&(this.minDeliveryDateEl.innerHTML=this.getNextWorkingDays(today,this.minDays)),this.maxDeliveryDateEl&&(this.maxDeliveryDateEl.innerHTML=this.getNextWorkingDays(today,this.maxDays))}getNextWorkingDays(date,daysToAdd){let nextDay=new Date(date),addedDays=0;for(;addedDays<daysToAdd;)nextDay.setDate(nextDay.getDate()+1),nextDay.getDay()!==0&&nextDay.getDay()!==6&&addedDays++;return this.formatDate(nextDay)}formatDate(date){const day=date.getDate(),month=date.toLocaleString("en-GB",{month:"short"});return`${day} ${month}`}}),customElements.get("l-product-block-rating-email")||customElements.define("l-product-block-rating-email",class extends HTMLElement{constructor(){super()}connectedCallback(){this.subscriptionFormTriggerEl=this.querySelector("[data-subscription-form]");const formId=this.dataset.klaviyoFormId||window.theme.settings.klaviyoForm||"YwWLVU";this.subscriptionFormTriggerEl.addEventListener("click",event=>{event.preventDefault(),console.log(formId),window._klOnsite=window._klOnsite||[],window._klOnsite.push(["openForm",formId])})}onSubscriptionFormTrigger(event){event.preventDefault(),window._klOnsite=window._klOnsite||[];const formID=window.matchMedia("(max-width: 749px)").matches?this.mobileFormId:this.desktopFormId;window._klOnsite.push(["openForm",formID])}}),customElements.get("l-product-sticky-atc")||customElements.define("l-product-sticky-atc",class extends HTMLElement{constructor(){super()}connectedCallback(){this.sectionId=this.dataset.sectionId,this.submitBtnEl=this.querySelector("[data-atc]"),this.realSubmitBtnEl=document.getElementById(`ProductSubmitButton-${this.sectionId}`),this.submitBtnEl.addEventListener("click",()=>{this.submitBtnEl.classList.add("is-loading"),debounce(()=>{this.submitBtnEl.classList.remove("is-loading")},3e3)()}),this.productAddedToCart=subscribe(window.PUB_SUB_EVENTS.cartUpdate,event=>{this.submitBtnEl.classList.remove("is-loading")}),console.log(this.realSubmitBtnEl),this.handleScrollEvent()}disconnectedCallback(){this.productAddedToCart()}handleScrollEvent(){const handleScrollEvent=()=>{const rect=this.realSubmitBtnEl.getBoundingClientRect(),isVisible=rect.top>=0&&rect.bottom<=window.innerHeight;this.classList.toggle("is-active",!isVisible)};window.addEventListener("scroll",debounce(handleScrollEvent,100)),handleScrollEvent()}}),customElements.get("l-product-media-gallery")||customElements.define("l-product-media-gallery",class extends HTMLElement{constructor(){super(),this.sectionId=this.dataset.sectionId}productVariantLoaded=void 0;connectedCallback(){window.Swiper?this.setupCarousel():document.addEventListener("carousel:loaded",()=>{this.setupCarousel()}),new window.mediaZoom(this),this.productVariantLoaded=subscribe(window.PUB_SUB_EVENTS.variantChange,event=>{this.onVariantChange(event.data)})}disconnectedCallback(){this.productVariantLoaded&&this.productVariantLoaded()}setupCarousel(){this.thumbnailCarousel=this.querySelector("[data-thumbnails-carousel]"),this.thumbnailCarousel&&(this.thumbnailSlides=this.thumbnailCarousel.querySelectorAll("[data-media]"),this.thumbnailNavigationNext=this.thumbnailCarousel.querySelector("[data-next]"),this.thumbnailSlides.forEach(swiperSlide=>swiperSlide.classList.remove("l-hidden")),this.thumbnailCarouselSwiper=new window.Swiper(this.thumbnailCarousel,{loop:!1,slidesPerView:"auto",spaceBetween:15,direction:"vertical",navigation:{nextEl:this.thumbnailNavigationNext}})),this.mainCarousel=this.querySelector("[data-main-carousel]"),this.mediaSlides=this.mainCarousel.querySelectorAll("[data-media]"),this.navigationNext=this.mainCarousel.querySelector("[data-next]"),this.navigationPrev=this.mainCarousel.querySelector("[data-prev]"),this.mediaSlides.forEach(swiperSlide=>swiperSlide.classList.remove("l-hidden")),this.mainCarouselSwiper=new window.Swiper(this.mainCarousel,{loop:!1,slidesPerView:"auto",keyboard:{enabled:!0},pagination:{el:`#MobilePagination-${this.dataset.sectionId}`,clickable:!0,dynamicBullets:!0},...this.thumbnailCarouselSwiper&&{thumbs:{swiper:this.thumbnailCarouselSwiper}}}),this.thumbnailCarouselSwiper&&(this.mainCarouselSwiper.controller.control=this.thumbnailCarouselSwiper),this.mainCarouselSwiper.on("slideChangeTransitionEnd",()=>{const activeSlideVideoEl=this.querySelector(".swiper-slide-active video");activeSlideVideoEl&&activeSlideVideoEl.play()})}getVariantMediaData(){return JSON.parse(this.querySelector(".js-product-variants").textContent)||null}onPlayVideo(){this.videoEls=this.querySelectorAll("video"),this.videoEls.forEach(videoEl=>{videoEl.pause()})}onVariantChange(data){this.variantData=this.variantData||this.getVariantMediaData();const selectedVariantId=data.variant.id,matchMediaId=this.variantData.find(variant=>variant.id==selectedVariantId)?.featured_media?.id;this.mediaSlides.forEach((mediaSlide,index0)=>{mediaSlide.dataset.media==matchMediaId&&this.mainCarouselSwiper.slideTo(index0,!0)})}}),customElements.get("l-quick-view-media")||customElements.define("l-quick-view-media",class extends HTMLElement{constructor(){super()}productVariantLoaded=void 0;connectedCallback(){this.variantMediaEls=this.querySelectorAll("[data-variant-media]"),this.productVariantLoaded=subscribe(window.PUB_SUB_EVENTS.variantChange,event=>{this.onVariantChange(event.data)})}onVariantChange(data){const selectedVariantId=data.variant.id;this.variantMediaEls.forEach(variantMediaEl=>{const variantId=parseInt(variantMediaEl.dataset.variantMedia);variantMediaEl.classList.toggle("l-hidden",variantId!=selectedVariantId)})}}),customElements.get("l-quick-view-drawer")||customElements.define("l-quick-view-drawer",class extends HTMLElement{constructor(){super()}productVariantLoaded=void 0;connectedCallback(){this.productVariantLoaded=subscribe(PUB_SUB_EVENTS.quickView.open,event=>{this.renderProductData(event.productUrl)}),this.cartUpdateLoaded=subscribe(PUB_SUB_EVENTS.cartUpdate,event=>{this.close()})}disconnectedCallback(){this.productVariantLoaded(),this.cartUpdateLoaded()}renderProductData(productUrl){const url=`${productUrl}?section_id=${this.dataset.sectionId}`;fetch(url).then(response=>response.text()).then(text=>{const html=document.createElement("div");html.innerHTML=text;const quickViewContainer=html.querySelector("#QuickViewContainer");quickViewContainer&&(this.innerHTML=quickViewContainer.innerHTML,this.open())}).catch(e=>{console.error(e)}).finally(()=>{this.setupEvent()})}setupEvent(){this.closeButtonEl=this.querySelector("[data-quick-view-close]"),this.productInfoEl=this.querySelector("l-product-info"),this.addEventListener("click",event=>{this.productInfoEl.contains(event.target)||this.close()}),this.closeButtonEl.addEventListener("click",()=>{this.close()})}open(){this.classList.remove("l-hidden"),requestAnimationFrame(()=>{this.classList.add("is-active"),lockBodyScroll()})}close(){this.classList.remove("is-active"),debounce(()=>{this.classList.add("l-hidden"),unLockBodyScroll()},800)()}}),window.addEventListener("DOMContentLoaded",()=>{function setupHeaderMobileDrawer(){const headerMobileDrawerEl=document.getElementById("nav-drawer"),subMenuLinkEls=headerMobileDrawerEl.querySelectorAll("[data-menu-trigger]"),backLinkEls=headerMobileDrawerEl.querySelectorAll("[data-menu-back]"),closeDrawerEl=headerMobileDrawerEl.querySelector("[data-drawer-toggle]"),closeBtnEls=headerMobileDrawerEl.querySelectorAll("[data-menu-close]");subMenuLinkEls.forEach(subMenuLinkEl=>{subMenuLinkEl.addEventListener("click",event=>{event.preventDefault();const subMenuLinkId=subMenuLinkEl.dataset.menuTrigger;document.getElementById(subMenuLinkId).classList.add("is-menu-active")})}),backLinkEls.forEach(backLinkEl=>{backLinkEl.addEventListener("click",event=>{event.preventDefault(),backLinkEl.closest('[id^="MobileNav-"]').classList.remove("is-menu-active")})}),closeBtnEls.forEach(closeBtnEl=>{closeBtnEl.addEventListener("click",()=>{closeDrawerEl.dispatchEvent(new Event("click",{bubbles:!0}))})});const cartCountEls=document.querySelectorAll("[data-cart-count]");["theme:cart:update","theme:cart:added","rebuy:cart.add","rebuy:cart.change"].forEach(event=>{document.addEventListener(event,()=>{console.log(event),fetch(window.theme.routes.cart_url+".js").then(response=>response.json()).then(cart=>{cartCountEls.forEach(cartCountEl=>cartCountEl.textContent=cart.item_count)}).catch(error=>{console.error("Error:",error)})})})}function setupCollectionPage(){const collectionPageEl=document.getElementById("CollectionPage")||document.getElementById("SearchPage");if(!collectionPageEl)return;const toggleBtnEl=collectionPageEl.querySelector("[data-toggle-filters]"),filterDrawer=collectionPageEl.querySelector("[data-collection-filters]"),filterDrawerWrapper=collectionPageEl.querySelector("[data-collection-filters-wrapper]");toggleBtnEl.addEventListener("click",()=>{window.matchMedia("(min-width: 768px)").matches&&filterDrawer.classList.add("collection__filters--visible")});const onClickOutSiteFilterDrawer=event=>{filterDrawerWrapper.contains(event.target)||filterDrawer.classList.remove("collection__filters--visible")};filterDrawer.addEventListener("click",onClickOutSiteFilterDrawer),document.addEventListener("theme:filters:init",()=>{filterDrawer.removeEventListener("click",onClickOutSiteFilterDrawer),setupCollectionPage()})}function animationOnScreen(params){const animationEls=document.querySelectorAll("[data-screen-animation-element]"),observer=new IntersectionObserver(entries=>{entries.forEach(entry=>{entry.target.classList.toggle("in-screen",entry.isIntersecting)})},{threshold:.1});animationEls.forEach(el=>{observer.observe(el)})}function triggerSubscriptionForm(){const subscriptionTriggerEls=document.querySelectorAll('a[href="#subscription-form"]'),mobileFormId=window.theme.settings.klaviyoForm||"YwWLVU",desktopFormId=window.theme.settings.klaviyoForm||"YwWLVU";subscriptionTriggerEls.forEach(subscriptionTriggerEl=>{subscriptionTriggerEl.addEventListener("click",event=>{event.preventDefault(),window._klOnsite=window._klOnsite||[];const formID=window.matchMedia("(max-width: 749px)").matches?mobileFormId:desktopFormId;window._klOnsite.push(["openForm",formID])})})}setupHeaderMobileDrawer(),animationOnScreen(),setupCollectionPage(),triggerSubscriptionForm()});
//# sourceMappingURL=/cdn/shop/t/29/assets/custom.js.map?v=158701207554556661591739886882
